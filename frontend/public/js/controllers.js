var mp4Controllers=angular.module("mp4Controllers",["720kb.datepicker","ngResource","ngDialog"]),newRequest=1,inProgress=2,completed=4,declined=3;mp4Controllers.controller("HomeCtrl",["$scope","$http","$resource","ngDialog",function($scope,$http,$resource,ngDialog){}]).controller("PortfolioCtrl",["$scope","$http","$resource",function($scope,$http,$resource){}]).controller("EditPortfolioCtrl",["$scope","$http","$resource",function($scope,$http,$resource){}]).controller("QueueCtrl",["$scope","$http","request","$routeParams","user",function($scope,$http,request,$routeParams,user){var curType=1;$scope.sortBy="+";var SPID=$routeParams.id,reqids=[];[].slice.call(document.querySelectorAll(".tabs")).forEach(function(el){new CBPFWTabs(el)}),$scope.tasks=[{userID:"123123",customerName:"Mike Wang",message:"this is a task",service:"Guitar Lesson",contactInfo:"2172172172",status:1,proposedTime:[],acceptedTime:[],createdTime:"2016-2-24"},{userID:"123123",customerName:"Judy Chen",message:"this is a task",service:"Guitar Lesson",contactInfo:"2172172172",status:1,proposedTime:[],acceptedTime:[],createdTime:"2016-2-24"}],$scope.setType=function(type){curType=type,$scope.reload(),console.log("query for type: "+curType)},$scope.reload=function(){console.log("reload");var SP;user.get(SPID).then(function(res){console.log("got data"),SP=res.data.data,console.log(SP),console.log("get req type: "+curType),curType==newRequest?reqids=SP["new"]:curType==inProgress?reqids=SP.accepted:curType==declined?reqids=SP.rejected:curType==completed&&(reqids=SP.completed),console.log(reqids),angular.forEach(reqids,function(i,key){request.get(i,SPID).then(function(res){var req=res.data.data;console.log(req),$scope.tasks.push(req)})},$scope.tasks)})},$scope.seeDetail=function(i){var ID=$scope.tasks[i]._id;console.log("id is: "+ID)},$scope.reload()}]).controller("DetailCtrl",["$scope","$http","$resource","$routeParams","request",function($scope,$http,$resource,$routeParams,request){var RID=$routeParams.id;$scope.reload=function(){request.get(RID,i).then(function(res){$scope.req=res.data.data,console.log($scope.req)})},$scope.reload()}]).controller("NewRequestCtrl",["$scope","$http","$resource","SP","request",function($scope,$http,$resource,SP,request){$routeParams.id}]).controller("TopbarCtrl",["$scope","$http","$resource","ngDialog",function($scope,$http,$resource,ngDialog){$scope.showLogin=function(){ngDialog.open({template:"./partials/login.html",className:"ngdialog-theme-default"})},$scope.showSignup=function(){ngDialog.open({template:"./partials/signup.html",className:"ngdialog-theme-default"})}}]).controller("profileController",["$scope","$http",function($scope,$http){$scope.profile=!1,$http.get("/profile").success(function(data){console.log(data),data.error||($scope.profile=!0,$scope.user=data.user)})}]).directive("topbar",function(){return{template:'\n    <div class="small-12 fixtop navbar" ng-controller = "TopbarCtrl">\n              <div class="small-12 small-centered columns">\n            <div class="float-left small-6 large-4 columns">\n                <div class="row">\n                    <div class="columns small-4"><a href="#/" class="bt round">Service</a></div>\n                    <div class="columns small-8 end"><a href="#/serviceprovider/1" class="bt round">My Queue</a></div>\n                </div>\n            </div>\n            <div class="float-right small-6 large-4 columns">\n                <div class="float-right row">\n                    <div class="columns small-6 float-right" ng-click="showSignup()"><a  class="bt round float-right">Signup</a></div>\n                    <div class="columns small-4 end float-right" ng-click="showLogin()"><a class="bt round float-right">Login</a></div>\n                </div>\n\n            </div>\n        </div>\n    </div>'}});